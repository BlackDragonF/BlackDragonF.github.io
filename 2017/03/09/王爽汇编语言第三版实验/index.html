
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="码龙的窝">
    <title>王爽汇编语言第三版实验 - 码龙的窝</title>
    <meta name="author" content="码龙黑曜">
    
        <meta name="keywords" content="博客,iOS,Computer Science,码龙,">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"码龙黑曜","sameAs":["https://github.com/BlackDragonF","https://t.me/Cosidian","http://steamcommunity.com/id/BlackDragonF/","mailto:obsidiandragon2016@gmail.com"],"image":"avatar.jpg"},"articleBody":"\n开学三周，王爽的《汇编语言》（第三版）总算是基本上看完了，本文是总结的第二部分，包括了书本上的实验\n\n实验1 查看CPU和内存，用机器指令和汇编指令编程\n使用Debug，将下面的程序段写入内存，逐条执行，观察每条指令执行后，CPU中相关寄存器的变化。机器码汇编指令执行后相关寄存器变化b8 20 4emov ax, 4E20HAX=4E20H05 16 14add ax, 1416HAX=6236Hbb 00 20mov bx, 2000HBX=2000H01 d8add ax, bxAX=8236H89 c3mov bx, axBX=8236H01 d8add ax, bxAX=046CHb8 1a 00mov ax, 001AHAX=001AHbb 26 00mov bx, 0026HBX=0026H00 d8add al, blAX=0040H00 dcadd ah, blAX=2640H00 c7add bh, alBX=4026Hb4 00mov ah, 0AX=0040H00 d8add al, blAX=0066H04 9cadd al, 9CHAX=0002H提示，可用E命令和A命令以两种方式将指令写入内存。注意用T命令执行时，CS:IP的指向。\n\n将下面3条指令写入从2000:0开始的内存单元中，利用这3条指令计算2的8次方。\n123mov ax, 1add ax, axjmp 2000:0003\n每次执行 add ax, ax 相当于将ax乘2，重复执行该条指令8次即可。\n\n查看内存中的内容。PC机主板上的ROM写有一个生产日期，在内存FFF00H～FFFFFH的某几个单元中，请找到这个生产日期并试图改变它。提示，如果读者对实验的结果感到疑惑，请仔细阅读第1章中的1.15节。\n\n\n通过Debug中的D命令，可以观察到生产日期以MM/DD/YY的格式存储在内存的ffff:0005-ffff:000c共计8个字节处。该生产日期不可被修改，因为其只读。\n\n向内存从B8100H开始的单元中填写数据，如：1-e B810:0000 01 01 02 02 03 03 04 04\n请读者先填写不同的数据，观察产生的现象；再改变填写的地址，观察产生的现象。提示，如果读者对实验的结果感到疑惑，请仔细阅读第1章中的1.15节。\n\n通过向内存中的显存地址空间写入数据，控制在屏幕上的不同位置显示不同颜色的字符。\n实验2 用机器指令和汇编指令编程\n使用Debug，将下面的程序段写入内存，逐条执行，根据指令执行后的实验运行情况填空。\n1234567891011121314151617181920mov ax, ffffmov ds, axmov ax, 2200mov ss, axmov sp, 1000mov ax,[0]  ;ax = _____add ax,[2]  ;ax = _____mov bx,[4]  ;bx = _____add bx,[6]  ;bx = _____push ax     ;sp = _____ 修改的内存单元的地址是_____内容为_____push bx     ;sp = _____ 修改的内存单元的地址是_____内容为_____pop ax      ;sp = _____ ax = _____pop bx      ;sp = _____ bx = _____push [4]    ;sp = _____ 修改的内存单元的地址是_____内容为_____push [6]    ;sp = _____ 修改的内存单元的地址是_____内容为_____\n结果（不唯一）:\n12345678910D4EA25EE30025F3700FE 220FE 25EE00FC 220FC 5F3700FE 5F370100 25EE00FE 220FE 300200FC 220FC 2F35\n\n仔细观察图3.19中的实验过程，然后分析：为什么2000:0～2000:f中的内容会发生改变？在使用T命令进行单步追踪的时候，产生了中断，为了保护现场，CPU将PSW、CS和IP依此入栈，导致了内存相关位置内容的改变。\n\n\n实验3 编程、编译、连接、跟踪\n将下面的程序保存为t1.asm文件，将其生成可执行文件t1.exe。\n12345678910111213141516171819assume cs:codesgcodesg segmentmov ax, 2000Hmov ss, axmov sp, 0add sp, 10pop axpop bxpush axpush bxpop axpop bxmov ax, 4c00hint 21hcodesg endsend\n结果：\n123edit t1.asmmasm.exe t1.asm;link.exe t1.obj;\n\n用Debug跟踪t1.exe的执行过程，写出每一步执行后，相关寄存器中的内容和栈顶的内容。汇编指令相关寄存器的内容栈顶的内容mov ax, 2000HAX = 2000H00B8Hmov ss, axSS = 2000H&#95;&#95;&#95;&#95;&#95;mov sp, 0SP = 00000Hadd sp, 10SP = 100000Hpop axAX = 0 SP = 120000Hpop bxBX = 0 SP = 140000Hpush axSP = 120000Hpush bxSP = 100000Hpop axAX = 0 SP = 120000Hpop bxBX = 0 SP = 140000Hmov ax, 4c00hAX = 4C00H0000Hint 21h&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;&#95;结果不唯一\n\nPSP的头两个字节是CD 20，用Debug加载t1.exe，查看PSP的内容。\n1-d 2119:0\n2119为CS-0010H\n\n\n实验4 [bx]和loop的使用\n编程，向内存0:200～0:23F依此传送数据0～63（3FH）。\n\n编程，向内存0:200～0:23F依此传送数据0～63（3FH），程序中只能使用9条指令，9条指令中包括“mov ax, 4c00h”和“int 21h”。\n123456789101112131415assume cs:codecode segmentmov ax, 0020hmov ds, axmov bx, 0mov cx, 64s:      mov [bx], blinc blloop smov ax, 4c00hint 21hcode endsend\n\n下面的程序的功能是将“mov ax, 4c00h”之前的指令复制到内存的0:200处，补全程序，上机调试，跟踪运行结果。\n12345678910111213141516assume cs:codecode segmentmov ax, _____mov ds, axmov ax, 0020hmov es, axmov bx, 0mov cx, _____s:      mov al, [bx]mov es:[bx], alinc bxloop smov ax, 4c00hint 21hcode endsend\n结果：\n12code18H\n提示：复制的是什么？从哪里到哪里？复制的是代码段中mov ax, 4c00h之前的代码，以数据的形式，从内存中代码段的位置复制到内存中0:200处开始的一段连续的空间。复制的是什么？有多少个字节？你如何直到要复制的字节的数量？可以用offset计算得出，也可以在Debug中用T命令观察得出。\n\n\n实验5 编写、调试具有多个段的程序\n将下面的程序编译连接，用Debug加载、跟踪，然后回答问题。\n12345678910111213141516171819202122232425262728assume cs:code, ds:data, ss:stackdata segmentdw 0123h, 0456h, 0789h, 0abch, 0defh, 0fedh, 0cbah, 0987hdata endsstack segmentdw 0, 0, 0, 0, 0, 0, 0, 0stack endscode segmentstart:  mov ax, stackmov ss, axmov sp, 16mov ax, datamov ds, axpush ds:[0]push ds:[2]pop ds:[2]pop ds:[0]mov ax, 4c00hint 21hcode endsend start\n①CPU执行程序，程序返回前，data段中的数据为多少？②CPU执行程序，程序返回前，CS = _____、SS = _____、DS = _____。③设程序加载后，code段的段地址为X，则data段的段地址为_____，stack段的段地址为_____。答案：①data段中的数据不变。②212B、212A、2129（答案不唯一）③X-2、X-1\n\n将下面的程序编译连接，用Debug加载、跟踪，然后回答问题。\n12345678910111213141516171819202122232425262728assume cs:code, ds:data, ss:stackdata segmentdw 0123h, 0456hdata endsstack segmentdw 0, 0stack endscode segmentstart:  mov ax, stackmov ss, axmov sp, 16mov ax, datamov ds, axpush ds:[0]push ds:[2]pop ds:[2]pop ds:[0]mov ax, 4c00hint 21hcode endsend start\n(1)CPU执行程序，程序返回前，data段中的数据为多少？(2)CPU执行程序，程序返回前，CS = _____、SS = _____、DS = _____。(3)设程序加载后，code段的段地址为X，则data段的段地址为_____，stack段的段地址为_____。(4)对于如下定义的段：\n123name segment...segment ends\n如果段中的数据占N个字节，则程序加载后，该段实际占有的空间为_____。答案：(1)data段中的数据不变。(2)212B、212A、2129（答案不唯一）(3)X-2、X-1(4)((N-1)/16 + 1)*16 其中除法为整除\n\n将下面的程序编译连接，用Debug加载、跟踪，然后回答问题。\n12345678910111213141516171819202122232425262728assume cs:code, ds:data, ss:stackcode segmentstart:  mov ax, stackmov ss, axmov sp, 16mov ax, datamov ds, axpush ds:[0]push ds:[2]pop ds:[2]pop ds:[0]mov ax, 4c00hint 21hcode endsdata segmentdw 0123h, 0456hdata endsstack segmentdw 0, 0stack endsend start\n(1)CPU执行程序，程序返回前，data段中的数据为多少？(2)CPU执行程序，程序返回前，CS = _____、SS = _____、DS = _____。(3)设程序加载后，code段的段地址为X，则data段的段地址为_____，stack段的段地址为_____。答案：(1)data段中的数据不变。(2)2129、212D、212C（答案不唯一）(3)X+3、X+4\n\n如果将1. 2. 3.题中的最后一条伪指令“end start”改为“end”（也就是说，不指明程序的入口），则哪个程序仍然可以正确执行？请说明原因。答案：只有程序3可以正确运行，在不指明程序入口的情况下，程序默认按照顺序从头开始执行，而3个程序中只有程序3的code段位于最开始的部分，所以只有程序3可以正确运行。\n\n程序如下，编写code段中的代码，将a段和b段中的数据依此相加，将结果存到c段中。\n123456789101112131415161718assume cs:codea segmentdb 1, 2, 3, 4, 5, 6, 7, 8a endsb segmentdb 1, 2, 3, 4, 5, 6, 7, 8b endsc segmentdb 0, 0, 0, 0, 0, 0, 0, 0c endscode segmentstart:?code endsend start\n答案：\n123456789101112131415start:  mov ax, amov ds, axmov ax, bmov es, axmov ax, cmov ss, axmov bx, 0mov cx, 8s:      mov al, [bx]add al, es:[bx]mov ss:[bx], alinc bxloop smov ax, 4c00hint 21h\n\n程序如下，编写code段中的代码，用push指令将a段中的前8个字型数据，逆序存储到b段中。\n12345678910111213141516assume cs:codea segmentdw 1, 2, 3, 4, 5, 6, 7, 8, 9, 0ah, 0bh, 0ch, 0dh, 0eh, 0fh, 0ffha endsb segmentdw 0, 0, 0, 0, 0, 0, 0, 0b endscode segmentstart:  ?code endsend start\n答案：\n123456789101112start:  mov ax, bmov ss, axmov sp, 16mov ax, amov ds, axmov bx, 0mov cx, 8s:      push [bx]add bx, 2loop smov ax, 4c00hint 21h\n\n\n实验6 实践课程中的程序\n将课程中所有讲解过的程序上机调试，用Debug跟踪其执行过程，并在过程中进一步理解所讲内容。\n\n编程，完成问题7.9中的程序。程序如下：\n1234567891011121314151617181920212223242526272829303132333435assume cs:codesg, ss:stacksg, ds:datasgstacksg segmentdw 0, 0, 0, 0, 0, 0, 0, 0stacksg endsdatasg segmentdb '1. display      'db '2. brows        'db '3. replace      'db '4. modify       'datasg endscodesg segmentstart:  mov ax, datasgmov ds, axmov ax, stacksgmov ss, axmov sp, 16mov bx, 0mov cx, 4s:      push cxmov cx, 4mov si, 0s0:     mov al, [bx + si + 3]and al, 11011111bmov [bx + si + 3], alinc siloop s0add bx, 16pop cxloop smov ax, 4c00hint 21hcodesg endsend start\n\n\n实验7 寻址方式在结构化数据访问中的应用编程，将data段中的数据按如下格式写入到table段中，并计算21年中的人均收入（取整），结果也按照下面的格式保存在table段中。12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273assume cs:codesg, ss:stackstack segmentdw 8 dup (0)stack endsdata segmentdb '1975', '1976', '1977', '1978', '1979', '1980', '1981', '1982', '1983'db '1984', '1985', '1986', '1987', '1988', '1989', '1990', '1991', '1992'db '1993', '1994', '1995'dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226dw 11542, 14430, 15257, 17800data endstable segmentdb 21 dup ('year summ ne ?? ')table endscodesg segmentstart:  mov ax, stackmov ss, axmov sp, 16mov ax, tablemov ds, axmov ax, datamov es, axmov bx, 0mov si, 0mov cx, 21year:   push cxmov cx, 4mov di, 0char:   mov al, es:[si]mov [bx+di], alinc siinc diloop charadd bx, 16pop cxloop yearmov cx, 21mov bx, 0income: mov ax, es:[si]mov [5+bx], axadd si, 2mov ax, es:[si]mov [7+bx], axadd si, 2add bx, 16loop incomemov cx, 21mov bx, 0staff:  mov ax, es:[si]mov [10+bx], axadd si, 2add bx, 16loop staffmov cx, 21mov bx, 0average:mov ax, [bx+5]mov dx, [bx+7]div word ptr [bx+10]mov [13+bx], axadd bx, 16loop averagemov ax, 4c00hint 21hcodesg endsend start\n实验8 分析一个奇怪的程序分析下面的程序，在运行前思考，这个程序可以正确返回吗？运行后再思考：为什么是这种结果？通过这个程序加深对相关内容的理解。12345678910111213141516171819assume cs:codesgcodesg segmentmov ax, 4c00hint 21hstart: mov ax, 0s:     nopnopmov di, offset smov si, offset s2mov ax, cs:[si]mov cs:[di], axs0:    jmp short ss1:    mov ax, 0int 21hmov ax, 0s2:    jmp short s1nopcodesg endsend start分析：这个程序可以正确返回，程序的入口为mov ax, 0，注意到指令jmp short s1占2字节，于是指令mov di, offset s将s的偏移地址传送到寄存器DI，mov si, offset s2将s2的偏移地址传送到SI，然后再通过通用寄存器ax做中转将s2处的指令复制到s处，最后再跳转至s处执行复制过来的指令。注意jmp short s1是相对跳转，其直接修改IP寄存器，从s2到s1共有8个字节的偏移，实际上 jmp short s1等价于(ip)=(ip)-8，通过Debug可知第一个nop指令的偏移地址为8，所以再执行了复制过的指令后，IP将指向0，程序按照顺序执行mov ax, 4c00h和int 21h，正确返回。\n实验9 根据材料编程编程：在屏幕中间分别显示绿色、绿底红色、白底蓝色的字符串’welcome to masm!’。编程所需的只是通过阅读、分析下面的材料获得。12345678910111213141516171819202122232425262728293031323334353637383940414243444546assume ds:data, cs:codedata segmentdb 'welcome to masm!'data endscode segmentstart:  mov ax, datamov ds, axmov ax, 0B800Hmov es, axmov bx, 1664mov si, 0mov cx, 16char1:  mov al, [si]mov ah, 10000010Bmov es:[bx], axadd bx, 2inc siloop char1mov bx, 1824mov si, 0mov cx, 16char2:  mov al, [si]mov ah, 10100100Bmov es:[bx], axadd bx, 2inc siloop char2mov bx, 1984mov si, 0mov cx, 16char3:  mov al, [si]mov ah, 11110001Bmov es:[bx], axadd bx, 2inc siloop char3mov ax, 4C00Hint 21Hcode endsend start\n实验10 编写子程序\n显示字符串\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162assume cs:code, ss:stackstack segmentdw 16 dup (0)stack endsdata segmentdb 'Welcome to masm!', 0data endscode segmentstart:  mov dh, 8mov dl, 3mov cl, 2mov ax, datamov ds, axmov ax, stackmov ss, axmov sp, 32mov si, 0call show_strmov ax, 4c00hint 21hshow_str:push cxpush bxpush axpush sipush dipush es;using cx, bx, ax, si, di, esmov ax, 0b800hmov es, axmov bx, 0mov di, 0mov al, 160mul dhadd bx, axmov al, 2mul dladd bx, ax ;bx stores address of start charactermov al, cl ;al stores the color of characterchar:   mov ch, 0mov cl, ds:[si]jcxz zeromov ch, almov es:[bx+di], cxadd di, 2inc sijmp charzero:   pop espop dipop sipop axpop bxpop cxretcode endsend start\n\n解决除法溢出的问题\n1234567891011121314151617181920212223242526272829303132333435assume cs:code, ss:stackstack segmentdw 16 dup (0)stack endscode segmentstart:  mov ax, stackmov ss, axmov sp, 32mov ax, 4240hmov dx, 000fhmov cx, 0ahcall divdwmov ax, 4c00hint 21hdivdw:  push bxmov bx, ax ; bx stores Lmov ax, dx ; ax stores Hmov dx, 0div cx ; after div, ax holds int(H/N), dx holds rem(H/N)push ax ; push int(H/N) temporarilymov ax, bx ; ax stores Ldiv cxmov cx, dxpop dxpop bxretcode endsend start\n\n数值显示\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697assume cs:code, ss:stackstack segmentdw 16 dup (0)stack endsdata segmentdb 10 dup (0)data endscode segmentstart:  mov ax, datamov ds, axmov ax, stackmov ss, axmov sp, 32mov ax, 12666mov si, 0call dtocmov dh, 8mov dl, 3mov cl, 2call show_strmov ax, 4c00hint 21hdtoc:   push axpush sipush dipush dxpush bxpush cxmov di, 0mov dx, 0mov bx, 10devide: mov cx, axjcxz stopdiv bxinc dipush dxmov dx, 0jmp devidestop:   mov cx, distring: pop bxadd bx, 30hmov [si], blinc siloop stringpop cxpop bxpop dxpop dipop sipop axretshow_str:push cxpush bxpush axpush sipush dipush es;using cx, bx, ax, si, di, esmov ax, 0b800hmov es, axmov bx, 0mov di, 0mov al, 160mul dhadd bx, axmov al, 2mul dladd bx, ax ;bx stores address of start charactermov al, cl ;al stores the color of characterchar:   mov ch, 0mov cl, ds:[si]jcxz zeromov ch, almov es:[bx+di], cxadd di, 2inc sijmp charzero:   pop espop dipop sipop axpop bxpop cxretcode endsend start\n\n\n实验11 编写子程序12345678910111213141516171819202122232425262728293031323334353637383940414243444546assume cs:codestack segmentdw 8 dup (0)stack endsdata segmentdb \"Beginner's All-purpose Symbolic Instruction Code.\", 0data endscode segmentbegin:  mov ax, stackmov ss, axmov sp, 16mov ax, datamov ds, axmov si, 0call lettercmov ax, 4c00hint 21hletterc:push cxpush sipushfmov ch, 0start:  mov cl, ds:[si]jcxz zerocmp cl, 97jb nextcmp cl, 122ja nextsub cl, 20hmov ds:[si], clnext:   inc sijmp startzero:   popfpop sipop cxretcode endsend begin\n实验12 编写0号中断的处理程序123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051assume cs:codecode segmentstart:mov ax, csmov ds, axmov si, offset do0mov ax, 0mov es, axmov di, 200hmov cx, offset do0end - offset do0cldrep movsbmov ax, 0mov es, axmov word ptr es:[0], 200hmov word ptr es:[2], 0mov ax, 4c00hint 21hdo0:jmp short do0startdb \"overflow!\"do0start:mov ax, csmov ds, axmov si, 202hmov ax, 0b800hmov es, axmov di, 12*160+36*2mov cx, 9s:mov al, [si]mov es:[di], alinc siadd di, 2loop smov ax, 4c00hint 21hdo0end:nopcode endsend start\n实验13 编写、应用中断例程\n编写并安装int 7ch中断例程，功能为显示一个用0结束的字符串，中断例程安装在0:200处。\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263assume cs:codecode segmentstart:  mov ax, csmov ds, axmov si, offset printmov ax, 0mov es, axmov di, 200hmov cx, offset printend - offset printcldrep movsbmov ax, 0mov es, axmov word ptr es:[7ch * 4], 200hmov word ptr es:[7ch * 4 + 2], 0mov ax, 4c00hint 21hprint:push espush axpush cxpush dxpush sipush dimov ax, 0b800hmov es, axmov al, 160mov ah, 0mul dhmov di, axadd dl, dlmov dh, 0add di, dxmov al, clprintstart:mov ch, 0mov cl, [si]jcxz zeromov ch, almov es:[di], cxadd di, 2inc sijmp printstartzero:pop dipop sipop dxpop cxpop axpop esiretprintend:nopcode endsend start\n\n编写并安装int 7ch中断例程，功能为完成loop指令功能。\n1234567891011121314151617181920212223242526272829303132assume cs:codecode segmentstart:  mov ax, csmov ds, axmov si, offset lpmov ax, 0mov es, axmov di, 200hmov cx, offset lpend - offset lpcldrep movsbmov ax, 0mov es, axmov word ptr es:[7ch * 4], 200hmov word ptr es:[7ch * 4 + 2], 0mov ax, 4c00hint 21hlp:     push bpmov bp, spdec cxjcxz lpretadd [bp + 2], bxlpret:  pop bpiretlpend:  nopcode endsend start\n\n下面的程序，分别在屏幕的第2、4、6、8行显示4句英文诗，补全程序。\n123456789101112131415161718192021222324252627282930assume cs:codecode segments1:     db 'Good,better,best,', '$'s2:     db 'Never let it rest,', '$'s3:     db 'Till good is better,', '$'s4:     db 'And better,best.', '$'s:      dw offset s1, offset s2, offset s3, offset s4row:    db 2, 4, 6, 8start:  mov ax, csmov ds, axmov bx, offset smov si, offset rowmov cx, 4ok:     mov bh, 0mov dh, _____mov dl, 0mov ah, 2int 10hmov dx, _____mov ah, 9int 21h__________________loop okmov ax, 4c00hint 21hcode endsend start\n答案：\n1234[si][bx]add bx, 2inc si\n\n\n实验14 访问CMOS RAM编程，以”年/月/日 时:分:秒”的格式，显示当前的日期，时间。注意：CMOS RAM中存储着系统的配置信息，出了保存时间信息的单元外，不要向其他的单元中写入内容，否则将引起一些系统错误。12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758assume cs:code, ds:datadata segments db 9, 8, 7, 4, 2, 0data endscode segmentstart:  mov ax, 0b800hmov es, axmov di, 160 * 12mov ax, datamov ds, axmov si, 0mov cx, 6print:  mov al, s[si]out 70h, alin al, 71hcall numbercmp si, 2jb slashje spacecmp si, 5jb colonnext:   inc siloop printmov ax, 4c00hint 21h;al-&gt;number, es:di-&gt;beginnumber: push cxmov ah, almov cl, 4shr ah, cland al, 00001111badd ah, 30hadd al, 30hmov byte ptr es:[di], ahmov byte ptr es:[di + 2], aladd di, 4pop cxretslash:  mov byte ptr es:[di], '\\'add di, 2jmp nextcolon:  mov byte ptr es:[di], ':'add di, 2jmp nextspace:  mov byte ptr es:[di], ' 'add di, 2jmp nextcode endsend start\n实验15 安装新的int 9中断例程安装一个新的int 9中断例程，功能：在DOS下，按下’A’键后，除非不再松开，如果松开，就显示满屏幕的’A’；其他键照常处理。12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667assume cs:codestack segmentdb 128 dup (0)stack endscode segmentstart:  mov ax, stackmov ss, axmov sp, 128push cspop dsmov ax, 0mov es, axmov si, offset int9mov di, 204hmov cx, offset int9end - offset int9cldrep movsbpush es: [9 * 4]pop es: [200h]push es: [9 * 4 + 2]pop es: [202h]climov word ptr es: [9 * 4], 204hmov word ptr es: [9 * 4 + 2], 0stimov ax, 4c00hint 21hint9:   push axpush bxpush cxpush esin al, 60hpushfcall word ptr cs:[200h]cmp al, 9ehjne int9retmov ax, 0b800hmov es, axmov bx, 0mov cx, 2000s:      mov byte ptr es:[bx], 'A'add bx, 2loop sint9ret:pop espop cxpop bxpop axiretint9end:nopcode endsend start\n实验16 编写包含多个功能子程序的中断例程安装一个新的int  7ch中断例程，为显示输出提供如下功能子程序\n\n清屏\n设置前景色\n设置背景色\n向上滚动一行\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126assume cs:codecode segmentstart:  mov ax, csmov ds, axmov si, offset screenmov ax, 0mov es, axmov di, 200hmov cx, offset screenend - offset screencldrep movsbmov ax, 0mov es, axmov word ptr es:[7ch * 4], 200hmov word ptr es:[7ch * 4 + 2], 0mov ax, 4c00hint 21hscreen: jmp short set;考虑到安装中断例程后偏移地址发生了变化，需要重新计算相关的偏移地址table   dw offset sub1 - offset screen + 200h, offset sub2 - offset screen + 200h, offset sub3 - offset screen + 200h, offset sub4 - offset screen + 200hset:    push bxcmp ah, 3ja sretmov bl, ahmov bh, 0add bx, bx;同上call word ptr cs:(table - screen + 200h)[bx]sret:   pop bxiretsub1:   push bxpush cxpush esmov bx, 0b800hmov es, bxmov bx, 0mov cx, 2000sub1s:  mov byte ptr es:[bx], ' 'add bx, 2loop sub1spop espop cxpop bxretsub2:   push bxpush cxpush esmov bx, 0b800hmov es, bxmov bx, 1mov cx, 2000sub2s:  and byte ptr es:[bx], 11111000Bor es:[bx], aladd bx, 2loop sub2spop espop cxpop bxretsub3:   push bxpush cxpush esmov cl, 4shl al, clmov bx, 0b800hmov es, bxmov bx, 1mov cx, 2000sub3s:  and byte ptr es:[bx], 10001111Bor es:[bx], aladd bx, 2loop sub3spop espop cxpop bxretsub4:   push cxpush sipush dipush espush dsmov si, 0b800hmov es, simov ds, simov si, 160mov di, 0cldmov cx, 24sub4s:  push cxmov cx, 160rep movsbpop cxloop sub4smov cx, 80mov si, 0sub4s1: mov byte ptr [160*24+si], ' 'add si, 2loop sub4s1pop dspop espop dipop sipop cxretscreenend:nopcode endsend start\n参考王爽《汇编语言》实验16：包含多个功能子程序的中断例程 解答可以用伪指令org x简化该程序org x表明接下来的指令从偏移地址x开始修改后的相关指令如下：1234567891011121314org 200hscreen: jmp short settable   dw sub1, sub2, sub3, sub4set:    push bxcmp ah, 3ja sretmov bl, ahmov bh, 0add bx, bxcall word ptr table[bx]\n实验17 编写包含多个功能子程序的中断例程安装一个新的int 7ch中断例程，实现通过逻辑扇区号对软盘进行读写。123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354assume cs:codecode segmentstart:  mov ax, csmov ds, axmov si, offset floppyiomov ax, 0mov es, axmov di, 200hmov cx, offset floppyioend - offset floppyiocldrep movsbmov ax, 0mov es, axmov word ptr es:[7ch * 4], 200hmov word ptr es:[7ch * 4 + 2], 0mov ax, 4c00hint 21hfloppyio:push axpush cxpush dxadd ah, 2mov al, 1push ax ;计算相应的ah和al并压栈mov ax, dxmov dx, 0mov cx, 1440div cx ;计算逻辑扇区号/1440push ax ;将商即面号压栈mov ax, dxmov dl, 18div dl ;计算逻辑扇区号/1440的余数/18inc ahmov ch, almov cl, ah ;设置相应的ch和clpop ax ;将相应的面号出栈mov dh, almov dl, 0 ;设置相应的dh和dlpop ax ;将相应的ah和al出栈int 13h ;调用13h例程进行实际的读写pop dxpop cxpop axiretfloppyioend:nopcode endsend start\n","dateCreated":"2017-03-09T11:42:37+08:00","dateModified":"2018-05-15T17:22:23+08:00","datePublished":"2017-03-09T11:42:37+08:00","description":"","headline":"王爽汇编语言第三版实验","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/"},"publisher":{"@type":"Organization","name":"码龙黑曜","sameAs":["https://github.com/BlackDragonF","https://t.me/Cosidian","http://steamcommunity.com/id/BlackDragonF/","mailto:obsidiandragon2016@gmail.com"],"image":"avatar.jpg","logo":{"@type":"ImageObject","url":"avatar.jpg"}},"url":"http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/","keywords":"实验, 汇编"}</script>
    <meta name="description" content="开学三周，王爽的《汇编语言》（第三版）总算是基本上看完了，本文是总结的第二部分，包括了书本上的实验  实验1 查看CPU和内存，用机器指令和汇编指令编程 使用Debug，将下面的程序段写入内存，逐条执行，观察每条指令执行后，CPU中相关寄存器的变化。机器码汇编指令执行后相关寄存器变化b8 20 4emov ax, 4E20HAX=4E20H05 16 14add ax, 1416HAX=6236">
<meta name="keywords" content="实验,汇编">
<meta property="og:type" content="blog">
<meta property="og:title" content="王爽汇编语言第三版实验">
<meta property="og:url" content="http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/index.html">
<meta property="og:site_name" content="码龙的窝">
<meta property="og:description" content="开学三周，王爽的《汇编语言》（第三版）总算是基本上看完了，本文是总结的第二部分，包括了书本上的实验  实验1 查看CPU和内存，用机器指令和汇编指令编程 使用Debug，将下面的程序段写入内存，逐条执行，观察每条指令执行后，CPU中相关寄存器的变化。机器码汇编指令执行后相关寄存器变化b8 20 4emov ax, 4E20HAX=4E20H05 16 14add ax, 1416HAX=6236">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2018-05-15T09:22:23.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="王爽汇编语言第三版实验">
<meta name="twitter:description" content="开学三周，王爽的《汇编语言》（第三版）总算是基本上看完了，本文是总结的第二部分，包括了书本上的实验  实验1 查看CPU和内存，用机器指令和汇编指令编程 使用Debug，将下面的程序段写入内存，逐条执行，观察每条指令执行后，CPU中相关寄存器的变化。机器码汇编指令执行后相关寄存器变化b8 20 4emov ax, 4E20HAX=4E20H05 16 14add ax, 1416HAX=6236">
    
    
        
    
    
        <meta property="og:image" content="http://blog.codedragon.tech/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-j4w0tbtf1olriqsnfyv4egntpbdblucqpyraoqqnvawa2vd6l4m8ljtn2yes.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-108458894-1', 'auto');
        ga('send', 'pageview');
    </script>


    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">码龙的窝</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">码龙黑曜</h4>
                
                    <h5 class="sidebar-profile-bio"><p>iOS开发者/计算机科学/兽人控</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="首页"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="分类"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="标签"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="归档"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/projects"
                            
                            title="项目"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-code" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">项目</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/about"
                            
                            title="关于"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/BlackDragonF" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://t.me/Cosidian" target="_blank" rel="noopener" title="Telegram">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-telegram" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Telegram</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://steamcommunity.com/id/BlackDragonF/" target="_blank" rel="noopener" title="Steam">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-steam" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Steam</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:obsidiandragon2016@gmail.com" target="_blank" rel="noopener" title="邮箱">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/links"
                            
                            title="友情链接"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-link" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">友情链接</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/resources"
                            
                            title="学习资源"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-share-alt" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">学习资源</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            王爽汇编语言第三版实验
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2017-03-09T11:42:37+08:00">
	
		    3月 09, 2017
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/汇编/">汇编</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <blockquote>
<p>开学三周，王爽的《汇编语言》（第三版）总算是基本上看完了，本文是总结的第二部分，包括了书本上的实验</p>
</blockquote>
<h2 id="实验1-查看CPU和内存，用机器指令和汇编指令编程"><a href="#实验1-查看CPU和内存，用机器指令和汇编指令编程" class="headerlink" title="实验1 查看CPU和内存，用机器指令和汇编指令编程"></a>实验1 查看CPU和内存，用机器指令和汇编指令编程</h2><ol>
<li><p>使用Debug，将下面的程序段写入内存，逐条执行，观察每条指令执行后，CPU中相关寄存器的变化。<br><table><thead><tr><th style="text-align: center">机器码</th><th style="text-align: center">汇编指令</th><th style="text-align: center">执行后相关寄存器变化</th></tr></thead><tbody><tr><td style="text-align: center">b8 20 4e</td><td style="text-align: center">mov ax, 4E20H</td><td style="text-align: center">AX=4E20H</td></tr><tr><td style="text-align: center">05 16 14</td><td style="text-align: center">add ax, 1416H</td><td style="text-align: center">AX=6236H</td></tr><tr><td style="text-align: center">bb 00 20</td><td style="text-align: center">mov bx, 2000H</td><td style="text-align: center">BX=2000H</td></tr><tr><td style="text-align: center">01 d8</td><td style="text-align: center">add ax, bx</td><td style="text-align: center">AX=8236H</td></tr><tr><td style="text-align: center">89 c3</td><td style="text-align: center">mov bx, ax</td><td style="text-align: center">BX=8236H</td></tr><tr><td style="text-align: center">01 d8</td><td style="text-align: center">add ax, bx</td><td style="text-align: center">AX=046CH</td></tr><tr><td style="text-align: center">b8 1a 00</td><td style="text-align: center">mov ax, 001AH</td><td style="text-align: center">AX=001AH</td></tr><tr><td style="text-align: center">bb 26 00</td><td style="text-align: center">mov bx, 0026H</td><td style="text-align: center">BX=0026H</td></tr><tr><td style="text-align: center">00 d8</td><td style="text-align: center">add al, bl</td><td style="text-align: center">AX=0040H</td></tr><tr><td style="text-align: center">00 dc</td><td style="text-align: center">add ah, bl</td><td style="text-align: center">AX=2640H</td></tr><tr><td style="text-align: center">00 c7</td><td style="text-align: center">add bh, al</td><td style="text-align: center">BX=4026H</td></tr><tr><td style="text-align: center">b4 00</td><td style="text-align: center">mov ah, 0</td><td style="text-align: center">AX=0040H</td></tr><tr><td style="text-align: center">00 d8</td><td style="text-align: center">add al, bl</td><td style="text-align: center">AX=0066H</td></tr><tr><td style="text-align: center">04 9c</td><td style="text-align: center">add al, 9CH</td><td style="text-align: center">AX=0002H</td></tr></tbody></table><br>提示，可用E命令和A命令以两种方式将指令写入内存。注意用T命令执行时，CS:IP的指向。</p>
</li>
<li><p>将下面3条指令写入从2000:0开始的内存单元中，利用这3条指令计算2的8次方。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">ax</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">jmp</span> <span class="number">2000</span>:<span class="number">0003</span></span><br></pre></td></tr></table></figure>
<p>每次执行 add ax, ax 相当于将ax乘2，重复执行该条指令8次即可。</p>
</li>
<li><p>查看内存中的内容。<br>PC机主板上的ROM写有一个生产日期，在内存FFF00H～FFFFFH的某几个单元中，请找到这个生产日期并试图改变它。<br>提示，如果读者对实验的结果感到疑惑，请仔细阅读第1章中的1.15节。</p>
</li>
</ol>
<p>通过Debug中的D命令，可以观察到生产日期以MM/DD/YY的格式存储在内存的ffff:0005-ffff:000c共计8个字节处。<br>该生产日期不可被修改，因为其只读。</p>
<ol start="4">
<li>向内存从B8100H开始的单元中填写数据，如：<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-e B810:<span class="number">0000</span> <span class="number">01</span> <span class="number">01</span> <span class="number">02</span> <span class="number">02</span> <span class="number">03</span> <span class="number">03</span> <span class="number">04</span> <span class="number">04</span></span><br></pre></td></tr></table></figure>
请读者先填写不同的数据，观察产生的现象；再改变填写的地址，观察产生的现象。<br>提示，如果读者对实验的结果感到疑惑，请仔细阅读第1章中的1.15节。</li>
</ol>
<p>通过向内存中的显存地址空间写入数据，控制在屏幕上的不同位置显示不同颜色的字符。</p>
<h2 id="实验2-用机器指令和汇编指令编程"><a href="#实验2-用机器指令和汇编指令编程" class="headerlink" title="实验2 用机器指令和汇编指令编程"></a>实验2 用机器指令和汇编指令编程</h2><ol>
<li><p>使用Debug，将下面的程序段写入内存，逐条执行，根据指令执行后的实验运行情况填空。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, ffff</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">2200</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>,[<span class="number">0</span>]  <span class="comment">;ax = _____</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">ax</span>,[<span class="number">2</span>]  <span class="comment">;ax = _____</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>,[<span class="number">4</span>]  <span class="comment">;bx = _____</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>,[<span class="number">6</span>]  <span class="comment">;bx = _____</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span>     <span class="comment">;sp = _____ 修改的内存单元的地址是_____内容为_____</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">bx</span>     <span class="comment">;sp = _____ 修改的内存单元的地址是_____内容为_____</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span>      <span class="comment">;sp = _____ ax = _____</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span>      <span class="comment">;sp = _____ bx = _____</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> [<span class="number">4</span>]    <span class="comment">;sp = _____ 修改的内存单元的地址是_____内容为_____</span></span><br><span class="line"><span class="keyword">push</span> [<span class="number">6</span>]    <span class="comment">;sp = _____ 修改的内存单元的地址是_____内容为_____</span></span><br></pre></td></tr></table></figure>
<p>结果（不唯一）:</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">D4EA</span><br><span class="line">25EE</span><br><span class="line"><span class="number">3002</span></span><br><span class="line">5F37</span><br><span class="line">00FE 220FE 25EE</span><br><span class="line">00FC 220FC 5F37</span><br><span class="line">00FE 5F37</span><br><span class="line"><span class="number">0100</span> 25EE</span><br><span class="line">00FE 220FE <span class="number">3002</span></span><br><span class="line">00FC 220FC 2F35</span><br></pre></td></tr></table></figure>
</li>
<li><p>仔细观察图3.19中的实验过程，然后分析：为什么2000:0～2000:f中的内容会发生改变？<br>在使用T命令进行单步追踪的时候，产生了中断，为了保护现场，CPU将PSW、CS和IP依此入栈，导致了内存相关位置内容的改变。</p>
</li>
</ol>
<h2 id="实验3-编程、编译、连接、跟踪"><a href="#实验3-编程、编译、连接、跟踪" class="headerlink" title="实验3 编程、编译、连接、跟踪"></a>实验3 编程、编译、连接、跟踪</h2><ol>
<li><p>将下面的程序保存为t1.asm文件，将其生成可执行文件t1.exe。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:codesg</span><br><span class="line"></span><br><span class="line">codesg <span class="meta">segment</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">2000H</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">sp</span>, <span class="number">10</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">codesg ends</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">edit t1.asm</span><br><span class="line">masm.exe t1.asm;</span><br><span class="line">link.exe t1.obj;</span><br></pre></td></tr></table></figure>
</li>
<li><p>用Debug跟踪t1.exe的执行过程，写出每一步执行后，相关寄存器中的内容和栈顶的内容。<br><table><thead><tr><th style="text-align: center">汇编指令</th><th style="text-align: center">相关寄存器的内容</th><th style="text-align: center">栈顶的内容</th></tr></thead><tbody><tr><td style="text-align: center">mov ax, 2000H</td><td style="text-align: center">AX = 2000H</td><td style="text-align: center">00B8H</td></tr><tr><td style="text-align: center">mov ss, ax</td><td style="text-align: center">SS = 2000H</td><td style="text-align: center">&#95;&#95;&#95;&#95;&#95;</td></tr><tr><td style="text-align: center">mov sp, 0</td><td style="text-align: center">SP = 0</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">add sp, 10</td><td style="text-align: center">SP = 10</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">pop ax</td><td style="text-align: center">AX = 0 SP = 12</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">pop bx</td><td style="text-align: center">BX = 0 SP = 14</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">push ax</td><td style="text-align: center">SP = 12</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">push bx</td><td style="text-align: center">SP = 10</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">pop ax</td><td style="text-align: center">AX = 0 SP = 12</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">pop bx</td><td style="text-align: center">BX = 0 SP = 14</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">mov ax, 4c00h</td><td style="text-align: center">AX = 4C00H</td><td style="text-align: center">0000H</td></tr><tr><td style="text-align: center">int 21h</td><td style="text-align: center">&#95;&#95;&#95;&#95;&#95;</td><td style="text-align: center">&#95;&#95;&#95;&#95;&#95;</td></tr></tbody></table><br>结果不唯一</p>
</li>
<li><p>PSP的头两个字节是CD 20，用Debug加载t1.exe，查看PSP的内容。</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-d <span class="number">2119</span>:<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>2119为CS-0010H</p>
</li>
</ol>
<h2 id="实验4-bx-和loop的使用"><a href="#实验4-bx-和loop的使用" class="headerlink" title="实验4 [bx]和loop的使用"></a>实验4 [bx]和loop的使用</h2><ol>
<li><p>编程，向内存0:200～0:23F依此传送数据0～63（3FH）。</p>
</li>
<li><p>编程，向内存0:200～0:23F依此传送数据0～63（3FH），程序中只能使用9条指令，9条指令中包括“mov ax, 4c00h”和“int 21h”。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0020h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">64</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">s:</span>      <span class="keyword">mov</span> [<span class="built_in">bx</span>], <span class="built_in">bl</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">bl</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
</li>
<li><p>下面的程序的功能是将“mov ax, 4c00h”之前的指令复制到内存的0:200处，补全程序，上机调试，跟踪运行结果。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, _____</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0020h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, _____</span><br><span class="line"><span class="symbol">s:</span>      <span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">bx</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code</span><br><span class="line"><span class="number">18H</span></span><br></pre></td></tr></table></figure>
<p>提示：<br>复制的是什么？从哪里到哪里？<br>复制的是代码段中mov ax, 4c00h之前的代码，以数据的形式，从内存中代码段的位置复制到内存中0:200处开始的一段连续的空间。<br>复制的是什么？有多少个字节？你如何直到要复制的字节的数量？<br>可以用offset计算得出，也可以在Debug中用T命令观察得出。</p>
</li>
</ol>
<h2 id="实验5-编写、调试具有多个段的程序"><a href="#实验5-编写、调试具有多个段的程序" class="headerlink" title="实验5 编写、调试具有多个段的程序"></a>实验5 编写、调试具有多个段的程序</h2><ol>
<li><p>将下面的程序编译连接，用Debug加载、跟踪，然后回答问题。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ds</span>:data, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0123h</span>, <span class="number">0456h</span>, <span class="number">0789h</span>, <span class="number">0abch</span>, <span class="number">0defh</span>, <span class="number">0fedh</span>, <span class="number">0cbah</span>, <span class="number">0987h</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span>:[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>①CPU执行程序，程序返回前，data段中的数据为多少？<br>②CPU执行程序，程序返回前，CS = _____、SS = _____、DS = _____。<br>③设程序加载后，code段的段地址为X，则data段的段地址为_____，stack段的段地址为_____。<br>答案：<br>①data段中的数据不变。<br>②212B、212A、2129（答案不唯一）<br>③X-2、X-1</p>
</li>
<li><p>将下面的程序编译连接，用Debug加载、跟踪，然后回答问题。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ds</span>:data, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0123h</span>, <span class="number">0456h</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span>:[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>(1)CPU执行程序，程序返回前，data段中的数据为多少？<br>(2)CPU执行程序，程序返回前，CS = _____、SS = _____、DS = _____。<br>(3)设程序加载后，code段的段地址为X，则data段的段地址为_____，stack段的段地址为_____。<br>(4)对于如下定义的段：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name <span class="meta">segment</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">segment</span> ends</span><br></pre></td></tr></table></figure>
<p>如果段中的数据占N个字节，则程序加载后，该段实际占有的空间为_____。<br>答案：<br>(1)data段中的数据不变。<br>(2)212B、212A、2129（答案不唯一）<br>(3)X-2、X-1<br>(4)((N-1)/16 + 1)*16 其中除法为整除</p>
</li>
<li><p>将下面的程序编译连接，用Debug加载、跟踪，然后回答问题。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ds</span>:data, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span>:[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span>:[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span>:[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0123h</span>, <span class="number">0456h</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>(1)CPU执行程序，程序返回前，data段中的数据为多少？<br>(2)CPU执行程序，程序返回前，CS = _____、SS = _____、DS = _____。<br>(3)设程序加载后，code段的段地址为X，则data段的段地址为_____，stack段的段地址为_____。<br>答案：<br>(1)data段中的数据不变。<br>(2)2129、212D、212C（答案不唯一）<br>(3)X+3、X+4</p>
</li>
<li><p>如果将1. 2. 3.题中的最后一条伪指令“end start”改为“end”（也就是说，不指明程序的入口），则哪个程序仍然可以正确执行？请说明原因。<br>答案：<br>只有程序3可以正确运行，在不指明程序入口的情况下，程序默认按照顺序从头开始执行，而3个程序中只有程序3的code段位于最开始的部分，所以只有程序3可以正确运行。</p>
</li>
<li><p>程序如下，编写code段中的代码，将a段和b段中的数据依此相加，将结果存到c段中。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line">a <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span></span><br><span class="line">a ends</span><br><span class="line"></span><br><span class="line">b <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span></span><br><span class="line">b ends</span><br><span class="line"></span><br><span class="line">c <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">c ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span></span><br><span class="line">?</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>答案：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, a</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, b</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, c</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">8</span></span><br><span class="line"><span class="symbol">s:</span>      <span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">bx</span>]</span><br><span class="line"><span class="keyword">add</span> <span class="built_in">al</span>, <span class="built_in">es</span>:[<span class="built_in">bx</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>:[<span class="built_in">bx</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>程序如下，编写code段中的代码，用push指令将a段中的前8个字型数据，逆序存储到b段中。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">a <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0ah</span>, <span class="number">0bh</span>, <span class="number">0ch</span>, <span class="number">0dh</span>, <span class="number">0eh</span>, <span class="number">0fh</span>, <span class="number">0ffh</span></span><br><span class="line">a ends</span><br><span class="line"></span><br><span class="line">b <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">b ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  </span><br><span class="line">?</span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>答案：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, b</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, a</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">8</span></span><br><span class="line"><span class="symbol">s:</span>      <span class="keyword">push</span> [<span class="built_in">bx</span>]</span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="实验6-实践课程中的程序"><a href="#实验6-实践课程中的程序" class="headerlink" title="实验6 实践课程中的程序"></a>实验6 实践课程中的程序</h2><ol>
<li><p>将课程中所有讲解过的程序上机调试，用Debug跟踪其执行过程，并在过程中进一步理解所讲内容。</p>
</li>
<li><p>编程，完成问题7.9中的程序。<br>程序如下：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:codesg, <span class="built_in">ss</span>:stacksg, <span class="built_in">ds</span>:datasg</span><br><span class="line">stacksg <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">stacksg ends</span><br><span class="line"></span><br><span class="line">datasg <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'1. display      '</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'2. brows        '</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'3. replace      '</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'4. modify       '</span></span><br><span class="line">datasg ends</span><br><span class="line"></span><br><span class="line">codesg <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, datasg</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, stacksg</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">4</span></span><br><span class="line"><span class="symbol">s:</span>      <span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">4</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">s0:</span>     <span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">bx</span> + <span class="built_in">si</span> + <span class="number">3</span>]</span><br><span class="line"><span class="keyword">and</span> <span class="built_in">al</span>, <span class="number">11011111b</span></span><br><span class="line"><span class="keyword">mov</span> [<span class="built_in">bx</span> + <span class="built_in">si</span> + <span class="number">3</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">loop</span> s0</span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="实验7-寻址方式在结构化数据访问中的应用"><a href="#实验7-寻址方式在结构化数据访问中的应用" class="headerlink" title="实验7 寻址方式在结构化数据访问中的应用"></a>实验7 寻址方式在结构化数据访问中的应用</h2><p>编程，将data段中的数据按如下格式写入到table段中，并计算21年中的人均收入（取整），结果也按照下面的格式保存在table段中。<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:codesg, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">8</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'1975'</span>, <span class="string">'1976'</span>, <span class="string">'1977'</span>, <span class="string">'1978'</span>, <span class="string">'1979'</span>, <span class="string">'1980'</span>, <span class="string">'1981'</span>, <span class="string">'1982'</span>, <span class="string">'1983'</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'1984'</span>, <span class="string">'1985'</span>, <span class="string">'1986'</span>, <span class="string">'1987'</span>, <span class="string">'1988'</span>, <span class="string">'1989'</span>, <span class="string">'1990'</span>, <span class="string">'1991'</span>, <span class="string">'1992'</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'1993'</span>, <span class="string">'1994'</span>, <span class="string">'1995'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="number">16</span>, <span class="number">22</span>, <span class="number">382</span>, <span class="number">1356</span>, <span class="number">2390</span>, <span class="number">8000</span>, <span class="number">16000</span>, <span class="number">24486</span>, <span class="number">50065</span>, <span class="number">97479</span>, <span class="number">140417</span>, <span class="number">197514</span></span><br><span class="line"><span class="built_in">dd</span> <span class="number">345980</span>, <span class="number">590827</span>, <span class="number">803530</span>, <span class="number">1183000</span>, <span class="number">1843000</span>, <span class="number">2759000</span>, <span class="number">3753000</span>, <span class="number">4649000</span>, <span class="number">5937000</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dw</span> <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">28</span>, <span class="number">38</span>, <span class="number">130</span>, <span class="number">220</span>, <span class="number">476</span>, <span class="number">778</span>, <span class="number">1001</span>, <span class="number">1442</span>, <span class="number">2258</span>, <span class="number">2793</span>, <span class="number">4037</span>, <span class="number">5635</span>, <span class="number">8226</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">11542</span>, <span class="number">14430</span>, <span class="number">15257</span>, <span class="number">17800</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">table <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="number">21</span> dup (<span class="string">'year summ ne ?? '</span>)</span><br><span class="line">table ends</span><br><span class="line"></span><br><span class="line">codesg <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, table</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">21</span></span><br><span class="line"><span class="symbol">year:</span>   <span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">4</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">char:</span>   <span class="keyword">mov</span> <span class="built_in">al</span>, <span class="built_in">es</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> [<span class="built_in">bx</span>+<span class="built_in">di</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">loop</span> char</span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">loop</span> year</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">21</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">income:</span> <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">es</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> [<span class="number">5</span>+<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">si</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">es</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> [<span class="number">7</span>+<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">si</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">loop</span> income</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">21</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">staff:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">es</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> [<span class="number">10</span>+<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">si</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">loop</span> staff</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">21</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">average:</span><span class="keyword">mov</span> <span class="built_in">ax</span>, [<span class="built_in">bx</span>+<span class="number">5</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, [<span class="built_in">bx</span>+<span class="number">7</span>]</span><br><span class="line"><span class="keyword">div</span> <span class="built_in">word</span> <span class="built_in">ptr</span> [<span class="built_in">bx</span>+<span class="number">10</span>]</span><br><span class="line"><span class="keyword">mov</span> [<span class="number">13</span>+<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">loop</span> average</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure></p>
<h2 id="实验8-分析一个奇怪的程序"><a href="#实验8-分析一个奇怪的程序" class="headerlink" title="实验8 分析一个奇怪的程序"></a>实验8 分析一个奇怪的程序</h2><p>分析下面的程序，在运行前思考，这个程序可以正确返回吗？<br>运行后再思考：为什么是这种结果？<br>通过这个程序加深对相关内容的理解。<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:codesg</span><br><span class="line">codesg <span class="meta">segment</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"><span class="symbol">start:</span> <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">s:</span>     <span class="keyword">nop</span></span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, offset s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset s2</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cs</span>:[<span class="built_in">di</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="symbol">s0:</span>    <span class="keyword">jmp</span> short s</span><br><span class="line"><span class="symbol">s1:</span>    <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">s2:</span>    <span class="keyword">jmp</span> short s1</span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure><br>分析：<br>这个程序可以正确返回，程序的入口为mov ax, 0，注意到指令jmp short s1占2字节，于是指令mov di, offset s将s的偏移地址传送到寄存器DI，mov si, offset s2将s2的偏移地址传送到SI，然后再通过通用寄存器ax做中转将s2处的指令复制到s处，最后再跳转至s处执行复制过来的指令。<br>注意jmp short s1是相对跳转，其直接修改IP寄存器，从s2到s1共有8个字节的偏移，实际上 jmp short s1等价于(ip)=(ip)-8，通过Debug可知第一个nop指令的偏移地址为8，所以再执行了复制过的指令后，IP将指向0，程序按照顺序执行mov ax, 4c00h和int 21h，正确返回。</p>
<h2 id="实验9-根据材料编程"><a href="#实验9-根据材料编程" class="headerlink" title="实验9 根据材料编程"></a>实验9 根据材料编程</h2><p>编程：在屏幕中间分别显示绿色、绿底红色、白底蓝色的字符串’welcome to masm!’。<br>编程所需的只是通过阅读、分析下面的材料获得。<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">ds</span>:data, <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'welcome to masm!'</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0B800H</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">1664</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">16</span></span><br><span class="line"><span class="symbol">char1:</span>  <span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="number">10000010B</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">loop</span> char1</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">1824</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">16</span></span><br><span class="line"><span class="symbol">char2:</span>  <span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="number">10100100B</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">loop</span> char2</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">1984</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">16</span></span><br><span class="line"><span class="symbol">char3:</span>  <span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="number">11110001B</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">loop</span> char3</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4C00H</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21H</span></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure></p>
<h2 id="实验10-编写子程序"><a href="#实验10-编写子程序" class="headerlink" title="实验10 编写子程序"></a>实验10 编写子程序</h2><ol>
<li><p>显示字符串</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">16</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">'Welcome to masm!'</span>, <span class="number">0</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="number">dh</span>, <span class="number">8</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dl</span>, <span class="number">3</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">32</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">call</span> show_str</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">show_str:</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"><span class="comment">;using cx, bx, ax, si, di, es</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="number">160</span></span><br><span class="line"><span class="keyword">mul</span> <span class="number">dh</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">mul</span> <span class="built_in">dl</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="built_in">ax</span> <span class="comment">;bx stores address of start character</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="built_in">cl</span> <span class="comment">;al stores the color of character</span></span><br><span class="line"><span class="symbol">char:</span>   <span class="keyword">mov</span> <span class="number">ch</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="built_in">ds</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">jcxz</span> <span class="meta">zero</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ch</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>+<span class="built_in">di</span>], <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">di</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">jmp</span> char</span><br><span class="line"><span class="symbol">zero:</span>   <span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</li>
<li><p>解决除法溢出的问题</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">16</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">32</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4240h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, <span class="number">000fh</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">0ah</span></span><br><span class="line"><span class="keyword">call</span> divdw</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">divdw:</span>  <span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="built_in">ax</span> <span class="comment">; bx stores L</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">dx</span> <span class="comment">; ax stores H</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">div</span> <span class="built_in">cx</span> <span class="comment">; after div, ax holds int(H/N), dx holds rem(H/N)</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span> <span class="comment">; push int(H/N) temporarily</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">bx</span> <span class="comment">; ax stores L</span></span><br><span class="line"><span class="keyword">div</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">dx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</li>
<li><p>数值显示</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ss</span>:stack</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">16</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="number">10</span> dup (<span class="number">0</span>)</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">32</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">12666</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">call</span> dtoc</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="number">dh</span>, <span class="number">8</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dl</span>, <span class="number">3</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">call</span> show_str</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">dtoc:</span>   <span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">devide:</span> <span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">jcxz</span> stop</span><br><span class="line"><span class="keyword">div</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">jmp</span> devide</span><br><span class="line"><span class="symbol">stop:</span>   <span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="built_in">di</span></span><br><span class="line"><span class="symbol">string:</span> <span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">30h</span></span><br><span class="line"><span class="keyword">mov</span> [<span class="built_in">si</span>], <span class="built_in">bl</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">loop</span> string</span><br><span class="line"></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">show_str:</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"><span class="comment">;using cx, bx, ax, si, di, es</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="number">160</span></span><br><span class="line"><span class="keyword">mul</span> <span class="number">dh</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">mul</span> <span class="built_in">dl</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="built_in">ax</span> <span class="comment">;bx stores address of start character</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="built_in">cl</span> <span class="comment">;al stores the color of character</span></span><br><span class="line"><span class="symbol">char:</span>   <span class="keyword">mov</span> <span class="number">ch</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="built_in">ds</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">jcxz</span> <span class="meta">zero</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ch</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>+<span class="built_in">di</span>], <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">di</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">jmp</span> char</span><br><span class="line"><span class="symbol">zero:</span>   <span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="实验11-编写子程序"><a href="#实验11-编写子程序" class="headerlink" title="实验11 编写子程序"></a>实验11 编写子程序</h2><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">dw</span> <span class="number">8</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="string">"Beginner's All-purpose Symbolic Instruction Code."</span>, <span class="number">0</span></span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">begin:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">16</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">call</span> letterc</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">letterc:</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pushf</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ch</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="built_in">ds</span>:[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">jcxz</span> <span class="meta">zero</span></span><br><span class="line"><span class="keyword">cmp</span> <span class="built_in">cl</span>, <span class="number">97</span></span><br><span class="line"><span class="keyword">jb</span> next</span><br><span class="line"><span class="keyword">cmp</span> <span class="built_in">cl</span>, <span class="number">122</span></span><br><span class="line"><span class="keyword">ja</span> next</span><br><span class="line"><span class="keyword">sub</span> <span class="built_in">cl</span>, <span class="number">20h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>:[<span class="built_in">si</span>], <span class="built_in">cl</span></span><br><span class="line"><span class="symbol">next:</span>   <span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">jmp</span> start</span><br><span class="line"></span><br><span class="line"><span class="symbol">zero:</span>   <span class="keyword">popf</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end begin</span><br></pre></td></tr></table></figure>
<h2 id="实验12-编写0号中断的处理程序"><a href="#实验12-编写0号中断的处理程序" class="headerlink" title="实验12 编写0号中断的处理程序"></a>实验12 编写0号中断的处理程序</h2><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset do0</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">200h</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, offset do0end - offset do0</span><br><span class="line"></span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">0</span>], <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">2</span>], <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">do0:</span></span><br><span class="line"><span class="keyword">jmp</span> short do0start</span><br><span class="line"><span class="built_in">db</span> <span class="string">"overflow!"</span></span><br><span class="line"><span class="symbol">do0start:</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">202h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">12</span>*<span class="number">160</span>+<span class="number">36</span>*<span class="number">2</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">9</span></span><br><span class="line"><span class="symbol">s:</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, [<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">di</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"><span class="symbol">do0end:</span></span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="实验13-编写、应用中断例程"><a href="#实验13-编写、应用中断例程" class="headerlink" title="实验13 编写、应用中断例程"></a>实验13 编写、应用中断例程</h2><ol>
<li><p>编写并安装int 7ch中断例程，功能为显示一个用0结束的字符串，中断例程安装在0:200处。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset print</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, offset printend - offset print</span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span>], <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span> + <span class="number">2</span>], <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">print:</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">di</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="number">160</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mul</span> <span class="number">dh</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">dl</span>, <span class="built_in">dl</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">dh</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">di</span>, <span class="built_in">dx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="built_in">cl</span></span><br><span class="line"><span class="symbol">printstart:</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ch</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, [<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">jcxz</span> <span class="meta">zero</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ch</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>:[<span class="built_in">di</span>], <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">di</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">jmp</span> printstart</span><br><span class="line"></span><br><span class="line"><span class="symbol">zero:</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">iret</span></span><br><span class="line"><span class="symbol">printend:</span></span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写并安装int 7ch中断例程，功能为完成loop指令功能。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset lp</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, offset lpend - offset lp</span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span>], <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span> + <span class="number">2</span>], <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">lp:</span>     <span class="keyword">push</span> <span class="built_in">bp</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bp</span>, <span class="built_in">sp</span></span><br><span class="line"><span class="keyword">dec</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">jcxz</span> lpret</span><br><span class="line"><span class="keyword">add</span> [<span class="built_in">bp</span> + <span class="number">2</span>], <span class="built_in">bx</span></span><br><span class="line"><span class="symbol">lpret:</span>  <span class="keyword">pop</span> <span class="built_in">bp</span></span><br><span class="line"><span class="keyword">iret</span></span><br><span class="line"><span class="symbol">lpend:</span>  <span class="keyword">nop</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line"></span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</li>
<li><p>下面的程序，分别在屏幕的第2、4、6、8行显示4句英文诗，补全程序。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">s1:</span>     <span class="built_in">db</span> <span class="string">'Good,better,best,'</span>, <span class="string">'$'</span></span><br><span class="line"><span class="symbol">s2:</span>     <span class="built_in">db</span> <span class="string">'Never let it rest,'</span>, <span class="string">'$'</span></span><br><span class="line"><span class="symbol">s3:</span>     <span class="built_in">db</span> <span class="string">'Till good is better,'</span>, <span class="string">'$'</span></span><br><span class="line"><span class="symbol">s4:</span>     <span class="built_in">db</span> <span class="string">'And better,best.'</span>, <span class="string">'$'</span></span><br><span class="line"><span class="symbol">s:</span>      <span class="built_in">dw</span> offset s1, offset s2, offset s3, offset s4</span><br><span class="line"><span class="symbol">row:</span>    <span class="built_in">db</span> <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, offset s</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset row</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">4</span></span><br><span class="line"><span class="symbol">ok:</span>     <span class="keyword">mov</span> <span class="number">bh</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">dh</span>, _____</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dl</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">10h</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, _____</span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="number">9</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">_________</span><br><span class="line">_________</span><br><span class="line"><span class="keyword">loop</span> ok</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>答案：</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">si</span>]</span><br><span class="line">[<span class="built_in">bx</span>]</span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">inc</span> <span class="built_in">si</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="实验14-访问CMOS-RAM"><a href="#实验14-访问CMOS-RAM" class="headerlink" title="实验14 访问CMOS RAM"></a>实验14 访问CMOS RAM</h2><p>编程，以”年/月/日 时:分:秒”的格式，显示当前的日期，时间。<br>注意：CMOS RAM中存储着系统的配置信息，出了保存时间信息的单元外，不要向其他的单元中写入内容，否则将引起一些系统错误。<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code, <span class="built_in">ds</span>:data</span><br><span class="line"></span><br><span class="line">data <span class="meta">segment</span></span><br><span class="line">s <span class="built_in">db</span> <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span></span><br><span class="line">data ends</span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">160</span> * <span class="number">12</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, data</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">print:</span>  <span class="keyword">mov</span> <span class="built_in">al</span>, s[<span class="built_in">si</span>]</span><br><span class="line"><span class="keyword">out</span> <span class="number">70h</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">in</span> <span class="built_in">al</span>, <span class="number">71h</span></span><br><span class="line"><span class="keyword">call</span> number</span><br><span class="line"><span class="keyword">cmp</span> <span class="built_in">si</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">jb</span> slash</span><br><span class="line"><span class="keyword">je</span> space</span><br><span class="line"><span class="keyword">cmp</span> <span class="built_in">si</span>, <span class="number">5</span></span><br><span class="line"><span class="keyword">jb</span> colon</span><br><span class="line"><span class="symbol">next:</span>   <span class="keyword">inc</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">loop</span> print</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;al-&gt;number, es:di-&gt;begin</span></span><br><span class="line"><span class="symbol">number:</span> <span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ah</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="number">4</span></span><br><span class="line"><span class="keyword">shr</span> <span class="number">ah</span>, <span class="built_in">cl</span></span><br><span class="line"><span class="keyword">and</span> <span class="built_in">al</span>, <span class="number">00001111b</span></span><br><span class="line"><span class="keyword">add</span> <span class="number">ah</span>, <span class="number">30h</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">al</span>, <span class="number">30h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">di</span>], <span class="number">ah</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">di</span> + <span class="number">2</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">di</span>, <span class="number">4</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">slash:</span>  <span class="keyword">mov</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">di</span>], <span class="string">'\'</span></span><br><span class="line"><span class="string">add di, 2</span></span><br><span class="line"><span class="string">jmp next</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">colon:  mov byte ptr es:[di], '</span>:<span class="string">'</span></span><br><span class="line"><span class="string">add di, 2</span></span><br><span class="line"><span class="string">jmp next</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">space:  mov byte ptr es:[di], '</span> <span class="string">'</span></span><br><span class="line"><span class="string">add di, 2</span></span><br><span class="line"><span class="string">jmp next</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">code ends</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">end start</span></span><br></pre></td></tr></table></figure></p>
<h2 id="实验15-安装新的int-9中断例程"><a href="#实验15-安装新的int-9中断例程" class="headerlink" title="实验15 安装新的int 9中断例程"></a>实验15 安装新的int 9中断例程</h2><p>安装一个新的int 9中断例程，功能：在DOS下，按下’A’键后，除非不再松开，如果松开，就显示满屏幕的’A’；其他键照常处理。<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">stack <span class="meta">segment</span></span><br><span class="line"><span class="built_in">db</span> <span class="number">128</span> dup (<span class="number">0</span>)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, stack</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ss</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">sp</span>, <span class="number">128</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset int9</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">204h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, offset int9end - offset int9</span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span>: [<span class="number">9</span> * <span class="number">4</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span>: [<span class="number">200h</span>]</span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span>: [<span class="number">9</span> * <span class="number">4</span> + <span class="number">2</span>]</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span>: [<span class="number">202h</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">cli</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>: [<span class="number">9</span> * <span class="number">4</span>], <span class="number">204h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>: [<span class="number">9</span> * <span class="number">4</span> + <span class="number">2</span>], <span class="number">0</span></span><br><span class="line"><span class="keyword">sti</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">int9:</span>   <span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> <span class="built_in">al</span>, <span class="number">60h</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pushf</span></span><br><span class="line"><span class="keyword">call</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">cs</span>:[<span class="number">200h</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">cmp</span> <span class="built_in">al</span>, <span class="number">9eh</span></span><br><span class="line"><span class="keyword">jne</span> int9ret</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">2000</span></span><br><span class="line"><span class="symbol">s:</span>      <span class="keyword">mov</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="string">'A'</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> s</span><br><span class="line"></span><br><span class="line"><span class="symbol">int9ret:</span><span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">iret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">int9end:</span><span class="keyword">nop</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure></p>
<h2 id="实验16-编写包含多个功能子程序的中断例程"><a href="#实验16-编写包含多个功能子程序的中断例程" class="headerlink" title="实验16 编写包含多个功能子程序的中断例程"></a>实验16 编写包含多个功能子程序的中断例程</h2><p>安装一个新的int  7ch中断例程，为显示输出提供如下功能子程序</p>
<ol>
<li>清屏</li>
<li>设置前景色</li>
<li>设置背景色</li>
<li>向上滚动一行</li>
</ol>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset screen</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, offset screenend - offset screen</span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span>], <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span> + <span class="number">2</span>], <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">screen:</span> <span class="keyword">jmp</span> short set</span><br><span class="line"><span class="comment">;考虑到安装中断例程后偏移地址发生了变化，需要重新计算相关的偏移地址</span></span><br><span class="line">table   <span class="built_in">dw</span> offset sub1 - offset screen + <span class="number">200h</span>, offset sub2 - offset screen + <span class="number">200h</span>, offset sub3 - offset screen + <span class="number">200h</span>, offset sub4 - offset screen + <span class="number">200h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">set:</span>    <span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">cmp</span> <span class="number">ah</span>, <span class="number">3</span></span><br><span class="line"><span class="keyword">ja</span> sret</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bl</span>, <span class="number">ah</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">bh</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="built_in">bx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;同上</span></span><br><span class="line"><span class="keyword">call</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">cs</span>:(table - screen + <span class="number">200h</span>)[<span class="built_in">bx</span>]</span><br><span class="line"></span><br><span class="line"><span class="symbol">sret:</span>   <span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">iret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">sub1:</span>   <span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">2000</span></span><br><span class="line"><span class="symbol">sub1s:</span>  <span class="keyword">mov</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="string">' '</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> sub1s</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">sub2:</span>   <span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">2000</span></span><br><span class="line"><span class="symbol">sub2s:</span>  <span class="keyword">and</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="number">11111000B</span></span><br><span class="line"><span class="keyword">or</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> sub2s</span><br><span class="line"></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">sub3:</span>   <span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="number">4</span></span><br><span class="line"><span class="keyword">shl</span> <span class="built_in">al</span>, <span class="built_in">cl</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bx</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">2000</span></span><br><span class="line"><span class="symbol">sub3s:</span>  <span class="keyword">and</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="number">10001111B</span></span><br><span class="line"><span class="keyword">or</span> <span class="built_in">es</span>:[<span class="built_in">bx</span>], <span class="built_in">al</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> sub3s</span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">bx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">sub4:</span>   <span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ds</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0b800h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">si</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">si</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">160</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">24</span></span><br><span class="line"><span class="symbol">sub4s:</span>  <span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">160</span></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">loop</span> sub4s</span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">80</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, <span class="number">0</span></span><br><span class="line"><span class="symbol">sub4s1:</span> <span class="keyword">mov</span> <span class="built_in">byte</span> <span class="built_in">ptr</span> [<span class="number">160</span>*<span class="number">24</span>+<span class="built_in">si</span>], <span class="string">' '</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">si</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">loop</span> sub4s1</span><br><span class="line"></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ds</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">es</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">di</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">si</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">ret</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">screenend:</span></span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<p>参考<a href="http://blog.csdn.net/lixiang0522/article/details/8434450" target="_blank" rel="noopener">王爽《汇编语言》实验16：包含多个功能子程序的中断例程 解答</a><br>可以用伪指令org x简化该程序<br>org x表明接下来的指令从偏移地址x开始<br>修改后的相关指令如下：<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">org <span class="number">200h</span></span><br><span class="line"><span class="symbol">screen:</span> <span class="keyword">jmp</span> short set</span><br><span class="line"></span><br><span class="line">table   <span class="built_in">dw</span> sub1, sub2, sub3, sub4</span><br><span class="line"></span><br><span class="line"><span class="symbol">set:</span>    <span class="keyword">push</span> <span class="built_in">bx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">cmp</span> <span class="number">ah</span>, <span class="number">3</span></span><br><span class="line"><span class="keyword">ja</span> sret</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">bl</span>, <span class="number">ah</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">bh</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">add</span> <span class="built_in">bx</span>, <span class="built_in">bx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> <span class="built_in">word</span> <span class="built_in">ptr</span> table[<span class="built_in">bx</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="实验17-编写包含多个功能子程序的中断例程"><a href="#实验17-编写包含多个功能子程序的中断例程" class="headerlink" title="实验17 编写包含多个功能子程序的中断例程"></a>实验17 编写包含多个功能子程序的中断例程</h2><p>安装一个新的int 7ch中断例程，实现通过逻辑扇区号对软盘进行读写。<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">assume</span> <span class="built_in">cs</span>:code</span><br><span class="line"></span><br><span class="line">code <span class="meta">segment</span></span><br><span class="line"><span class="symbol">start:</span>  <span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">cs</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ds</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">si</span>, offset floppyio</span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">di</span>, <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, offset floppyioend - offset floppyio</span><br><span class="line"><span class="keyword">cld</span></span><br><span class="line"><span class="keyword">rep</span> <span class="keyword">movsb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">es</span>, <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span>], <span class="number">200h</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">word</span> <span class="built_in">ptr</span> <span class="built_in">es</span>:[<span class="number">7ch</span> * <span class="number">4</span> + <span class="number">2</span>], <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="number">4c00h</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">21h</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">floppyio:</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">dx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add</span> <span class="number">ah</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">al</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span> <span class="comment">;计算相应的ah和al并压栈</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dx</span>, <span class="number">0</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cx</span>, <span class="number">1440</span></span><br><span class="line"><span class="keyword">div</span> <span class="built_in">cx</span> <span class="comment">;计算逻辑扇区号/1440</span></span><br><span class="line"><span class="keyword">push</span> <span class="built_in">ax</span> <span class="comment">;将商即面号压栈</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">ax</span>, <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dl</span>, <span class="number">18</span></span><br><span class="line"><span class="keyword">div</span> <span class="built_in">dl</span> <span class="comment">;计算逻辑扇区号/1440的余数/18</span></span><br><span class="line"><span class="keyword">inc</span> <span class="number">ah</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">ch</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">cl</span>, <span class="number">ah</span> <span class="comment">;设置相应的ch和cl</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span> <span class="comment">;将相应的面号出栈</span></span><br><span class="line"><span class="keyword">mov</span> <span class="number">dh</span>, <span class="built_in">al</span></span><br><span class="line"><span class="keyword">mov</span> <span class="built_in">dl</span>, <span class="number">0</span> <span class="comment">;设置相应的dh和dl</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span> <span class="comment">;将相应的ah和al出栈</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">13h</span> <span class="comment">;调用13h例程进行实际的读写</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">dx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">cx</span></span><br><span class="line"><span class="keyword">pop</span> <span class="built_in">ax</span></span><br><span class="line"><span class="keyword">iret</span></span><br><span class="line"><span class="symbol">floppyioend:</span></span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure></p>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/实验/">实验</a> <a class="tag tag--primary tag--small t-link" href="/tags/汇编/">汇编</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/03/10/王爽汇编语言第三版综合研究结论/" data-tooltip="王爽汇编语言第三版综合研究结论" aria-label="上一篇: 王爽汇编语言第三版综合研究结论">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/03/05/王爽汇编语言第三版检测点答案/" data-tooltip="王爽汇编语言第三版检测点答案" aria-label="下一篇: 王爽汇编语言第三版检测点答案">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Weibo">
                    <i class="fa fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/&amp;title=王爽汇编语言第三版实验" title="分享到 QQ">
                    <i class="fa fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Qzone">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 码龙黑曜. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/03/10/王爽汇编语言第三版综合研究结论/" data-tooltip="王爽汇编语言第三版综合研究结论" aria-label="上一篇: 王爽汇编语言第三版综合研究结论">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/03/05/王爽汇编语言第三版检测点答案/" data-tooltip="王爽汇编语言第三版检测点答案" aria-label="下一篇: 王爽汇编语言第三版检测点答案">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Weibo">
                    <i class="fa fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/&amp;title=王爽汇编语言第三版实验" title="分享到 QQ">
                    <i class="fa fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/" title="分享到 Qzone">
                    <i class="fa fa-star" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i><span>分享到 Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/">
                    <i class="fa fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/">
                    <i class="fa fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/&amp;title=王爽汇编语言第三版实验">
                    <i class="fa fa-qq" aria-hidden="true"></i><span>分享到 QQ</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://blog.codedragon.tech/2017/03/09/王爽汇编语言第三版实验/">
                    <i class="fa fa-star" aria-hidden="true"></i><span>分享到 Qzone</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="作者的图片"/>
        
            <h4 id="about-card-name">码龙黑曜</h4>
        
            <div id="about-card-bio"><p>iOS开发者/计算机科学/兽人控</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>华中科技大学 本科在读</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Wuhan, China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-feiabjni254mgbxiozwsjblcsiodjqohurk0dcfkq0aooroewq6bvkdnadrg.min.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
